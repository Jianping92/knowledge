# Vue2.x 中如何检测数组的变化
## 1.为什么不能检测到数组的变化
数组是对象的一种特殊形式，在 JavaScript 中数组元素是以数字作为属性名存储的。当我们使用 `Object.defineProperty()` 方法来定义数组的某个元素时，
并不会触发其监听器，因为该元素并不是一个真正的属性，而是一个数组下标。因此，对数组的元素进行修改或添加时，会触发 array.push()、 array.pop() 方法等数组常用的方法来添加或删除元素，
这些方法会改变数组的长度，但却不会改变数组本身的属性。

PS：此处提供另一个角度：`Object.defineProperty()` 可以实现监听数组变化但是考虑到性能问题没有直接使用，兼听兼顾，[跳转链接](https://segmentfault.com/a/1190000015783546)

## 2.Vue2.x 怎么实现监听数组的变化
Vue2.x 将数组的常用方法进行了重写，指向了自己定义的数组原型方法。
当调用重组的 7 种数组相关 api 时，可以通知依赖更新。
如果数组中包含着引用类型，会对数组中的引用类型再次递归遍历进行监控。

## 3.Vue2.x 什么情况下不能检测到数组到变化
当利用索引直接设置一个数组项时，例如 `vm.items[indexOfItem] = newValue`

当修改数组的长度时，例如 `vm.items.length = newLength`

解决方案： $set、七种重新方法；

# 4.以 push() 为例解释下重写做了哪些操作
首先获取数组对象是的原型对象：`Array.prototype`

通过原型对象获取 `push()` 方法的描述符：`Object.getOwnPropertyDescriptor(Array.prototype, "push")`

创建一个新的 push() 方法，该方法内调用原始的 push() 方法，将新的元素放入到数组中；再获取数组对象的 Observer 实例；触发数组对象的 dep 对象，向依赖该数组的 Watcher 对象发送通知；

最后将新的 push() 方法绑定到数组对象上。
